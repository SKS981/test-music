# 时光留声产品开发计划

## 项目概述
开发一个基于Supabase和Vercel的"时光留声"Web应用，支持用户注册登录、音视频录制、遗物创建和管理，数据持久化存储在云端。

## 技术栈
- **后端**：Supabase（认证 + 数据库 + 存储）
- **前端**：原生HTML/JS/CSS + Supabase JS SDK
- **部署**：Vercel（前端）+ Supabase（云后端）

## 实施步骤

### 1. 后端架构设计
- 创建Supabase项目
- 设计数据库schema：
  - 联系人表（id, user_id, name, email, phone, created_at）
  - 遗物表（id, user_id, contact_id, title, content, ai_enhanced_content, audio_url, video_url, silence_threshold_days, created_at）
  - 录制文件表（id, user_id, relic_id, file_url, file_type, duration, created_at）
- 配置行级安全策略（RLS）
- 配置存储桶和访问权限

### 2. 前端开发
- 登录/注册页面（使用Supabase Auth）
- 主应用布局：顶部导航，左侧联系人列表，右侧遗物/录制区
- 联系人管理模块（增删改查）
- 遗物创建模块（文字输入 + AI润色）
- 音视频录制模块：
  - 调用navigator.mediaDevices获取音视频流
  - 使用MediaRecorder录制
  - 生成Blob并上传到Supabase Storage
  - 获取公网URL并存入数据库
- 遗物列表展示（支持播放音视频）
- 沉默阈值设置

### 3. 部署与配置
- 在Vercel创建项目
- 部署前端代码
- 配置环境变量（Supabase URL、anon key）
- 测试公网访问

### 4. 测试与验证
- 注册/登录功能测试
- 联系人管理测试
- 音视频录制与上传测试
- 遗物创建与查看测试
- 跨设备数据同步测试

## 预期交付
- 完整的前端代码
- 配置好的Supabase项目
- 部署在Vercel的公网访问地址
- 详细的测试用例

## 核心功能
1. 用户系统：注册/登录，密码加密存储
2. 音视频录制：实时预览，录制后自动上传
3. 数据持久化：所有数据存入Supabase，跨设备可见
4. 真实部署：公网HTTPS访问，数据永不丢失